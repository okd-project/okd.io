<!doctype html><html lang=en class=no-js> <head><meta charset=utf-8><meta name=viewport content="width=device-width,initial-scale=1"><meta name=description content="The Community Distribution of Kubernetes that powers Red Hat OpenShift"><meta name=author content="Brian Innes"><link href=https://okd.io/blog/2023/04/13/create_a_single_node_okd_sno_cluster_with_assisted_installer/ rel=canonical><link href=../../../../2022/12/12/building_the_okd_payload/ rel=prev><link href=../../../07/18/state_of_affairs_in_okd_cicd/ rel=next><link rel=icon href=../../../../../img/okdLogo.png><meta name=generator content="mkdocs-1.6.0, mkdocs-material-9.5.25"><title>Create a Single Node OKD (SNO) Cluster with Assisted Installer - OKD.io</title><link rel=stylesheet href=../../../../../assets/stylesheets/main.6543a935.min.css><link rel=stylesheet href=../../../../../assets/stylesheets/palette.06af60db.min.css><link rel=preconnect href=https://fonts.gstatic.com crossorigin><link rel=stylesheet href="https://fonts.googleapis.com/css?family=Open+Sans:300,300i,400,400i,700,700i%7CRoboto+Mono:400,400i,700,700i&display=fallback"><style>:root{--md-text-font:"Open Sans";--md-code-font:"Roboto Mono"}</style><link rel=stylesheet href=../../../../../css/extra.css><script>__md_scope=new URL("../../../../..",location),__md_hash=e=>[...e].reduce((e,_)=>(e<<5)-e+_.charCodeAt(0),0),__md_get=(e,_=localStorage,t=__md_scope)=>JSON.parse(_.getItem(t.pathname+"."+e)),__md_set=(e,_,t=localStorage,a=__md_scope)=>{try{t.setItem(a.pathname+"."+e,JSON.stringify(_))}catch(e){}}</script><meta property=og:type content=website><meta property=og:title content="Create a Single Node OKD (SNO) Cluster with Assisted Installer - OKD.io"><meta property=og:description content="The Community Distribution of Kubernetes that powers Red Hat OpenShift"><meta property=og:image content=https://okd.io/assets/images/social/blog/posts/guides/sno-assisted-installer.png><meta property=og:image:type content=image/png><meta property=og:image:width content=1200><meta property=og:image:height content=630><meta content=https://okd.io/blog/2023/04/13/create_a_single_node_okd_sno_cluster_with_assisted_installer/ property=og:url><meta name=twitter:card content=summary_large_image><meta name=twitter:title content="Create a Single Node OKD (SNO) Cluster with Assisted Installer - OKD.io"><meta name=twitter:description content="The Community Distribution of Kubernetes that powers Red Hat OpenShift"><meta name=twitter:image content=https://okd.io/assets/images/social/blog/posts/guides/sno-assisted-installer.png></head> <body dir=ltr data-md-color-scheme=okd data-md-color-primary=blue-grey data-md-color-accent=red> <input class=md-toggle data-md-toggle=drawer type=checkbox id=__drawer autocomplete=off> <input class=md-toggle data-md-toggle=search type=checkbox id=__search autocomplete=off> <label class=md-overlay for=__drawer></label> <div data-md-component=skip> <a href=#create-a-single-node-okd-sno-cluster-with-assisted-installer class=md-skip> Skip to content </a> </div> <div data-md-component=announce> </div> <header class="md-header md-header--shadow" data-md-component=header> <nav class="md-header__inner md-grid" aria-label=Header> <a href=../../../../.. title=OKD.io class="md-header__button md-logo" aria-label=OKD.io data-md-component=logo> <img src=../../../../../img/okd_logo_resized.svg alt=logo> </a> <label class="md-header__button md-icon" for=__drawer> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M3 6h18v2H3V6m0 5h18v2H3v-2m0 5h18v2H3v-2Z"/></svg> </label> <div class=md-header__title data-md-component=header-title> <div class=md-header__ellipsis> <div class=md-header__topic> <span class=md-ellipsis> OKD.io </span> </div> <div class=md-header__topic data-md-component=header-topic> <span class=md-ellipsis> Create a Single Node OKD (SNO) Cluster with Assisted Installer </span> </div> </div> </div> <form class=md-header__option data-md-component=palette> <input class=md-option data-md-color-media="(prefers-color-scheme: light)" data-md-color-scheme=okd data-md-color-primary=blue-grey data-md-color-accent=red aria-label="Switch to dark mode" type=radio name=__palette id=__palette_0> <label class="md-header__button md-icon" title="Switch to dark mode" for=__palette_1 hidden> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M17 6H7c-3.31 0-6 2.69-6 6s2.69 6 6 6h10c3.31 0 6-2.69 6-6s-2.69-6-6-6zm0 10H7c-2.21 0-4-1.79-4-4s1.79-4 4-4h10c2.21 0 4 1.79 4 4s-1.79 4-4 4zM7 9c-1.66 0-3 1.34-3 3s1.34 3 3 3 3-1.34 3-3-1.34-3-3-3z"/></svg> </label> <input class=md-option data-md-color-media="(prefers-color-scheme: dark)" data-md-color-scheme=okd-dark data-md-color-primary=okd-blue data-md-color-accent=okd-light-green aria-label="Switch to light mode" type=radio name=__palette id=__palette_1> <label class="md-header__button md-icon" title="Switch to light mode" for=__palette_0 hidden> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M17 7H7a5 5 0 0 0-5 5 5 5 0 0 0 5 5h10a5 5 0 0 0 5-5 5 5 0 0 0-5-5m0 8a3 3 0 0 1-3-3 3 3 0 0 1 3-3 3 3 0 0 1 3 3 3 3 0 0 1-3 3Z"/></svg> </label> </form> <script>var media,input,key,value,palette=__md_get("__palette");if(palette&&palette.color){"(prefers-color-scheme)"===palette.color.media&&(media=matchMedia("(prefers-color-scheme: light)"),input=document.querySelector(media.matches?"[data-md-color-media='(prefers-color-scheme: light)']":"[data-md-color-media='(prefers-color-scheme: dark)']"),palette.color.media=input.getAttribute("data-md-color-media"),palette.color.scheme=input.getAttribute("data-md-color-scheme"),palette.color.primary=input.getAttribute("data-md-color-primary"),palette.color.accent=input.getAttribute("data-md-color-accent"));for([key,value]of Object.entries(palette.color))document.body.setAttribute("data-md-color-"+key,value)}</script> <label class="md-header__button md-icon" for=__search> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.516 6.516 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5Z"/></svg> </label> <div class=md-search data-md-component=search role=dialog> <label class=md-search__overlay for=__search></label> <div class=md-search__inner role=search> <form class=md-search__form name=search> <input type=text class=md-search__input name=query aria-label=Search placeholder=Search autocapitalize=off autocorrect=off autocomplete=off spellcheck=false data-md-component=search-query required> <label class="md-search__icon md-icon" for=__search> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.516 6.516 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5Z"/></svg> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11h12Z"/></svg> </label> <nav class=md-search__options aria-label=Search> <button type=reset class="md-search__icon md-icon" title=Clear aria-label=Clear tabindex=-1> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M19 6.41 17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12 19 6.41Z"/></svg> </button> </nav> <div class=md-search__suggest data-md-component=search-suggest></div> </form> <div class=md-search__output> <div class=md-search__scrollwrap data-md-scrollfix> <div class=md-search-result data-md-component=search-result> <div class=md-search-result__meta> Initializing search </div> <ol class=md-search-result__list role=presentation></ol> </div> </div> </div> </div> </div> <div class=md-header__source> <a href=https://github.com/okd-project/okd.io title="Go to repository" class=md-source data-md-component=source> <div class="md-source__icon md-icon"> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 448 512"><!-- Font Awesome Free 6.5.2 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2024 Fonticons, Inc.--><path d="M439.55 236.05 244 40.45a28.87 28.87 0 0 0-40.81 0l-40.66 40.63 51.52 51.52c27.06-9.14 52.68 16.77 43.39 43.68l49.66 49.66c34.23-11.8 61.18 31 35.47 56.69-26.49 26.49-70.21-2.87-56-37.34L240.22 199v121.85c25.3 12.54 22.26 41.85 9.08 55a34.34 34.34 0 0 1-48.55 0c-17.57-17.6-11.07-46.91 11.25-56v-123c-20.8-8.51-24.6-30.74-18.64-45L142.57 101 8.45 235.14a28.86 28.86 0 0 0 0 40.81l195.61 195.6a28.86 28.86 0 0 0 40.8 0l194.69-194.69a28.86 28.86 0 0 0 0-40.81z"/></svg> </div> <div class=md-source__repository> okd-io </div> </a> </div> </nav> </header> <div class=md-container data-md-component=container> <main class=md-main data-md-component=main> <div class="md-main__inner md-grid"> <div class="md-sidebar md-sidebar--primary" data-md-component=sidebar data-md-type=navigation hidden> <div class=md-sidebar__scrollwrap> <div class=md-sidebar__inner> <nav class="md-nav md-nav--primary" aria-label=Navigation data-md-level=0> <label class=md-nav__title for=__drawer> <a href=../../../../.. title=OKD.io class="md-nav__button md-logo" aria-label=OKD.io data-md-component=logo> <img src=../../../../../img/okd_logo_resized.svg alt=logo> </a> OKD.io </label> <div class=md-nav__source> <a href=https://github.com/okd-project/okd.io title="Go to repository" class=md-source data-md-component=source> <div class="md-source__icon md-icon"> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 448 512"><!-- Font Awesome Free 6.5.2 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2024 Fonticons, Inc.--><path d="M439.55 236.05 244 40.45a28.87 28.87 0 0 0-40.81 0l-40.66 40.63 51.52 51.52c27.06-9.14 52.68 16.77 43.39 43.68l49.66 49.66c34.23-11.8 61.18 31 35.47 56.69-26.49 26.49-70.21-2.87-56-37.34L240.22 199v121.85c25.3 12.54 22.26 41.85 9.08 55a34.34 34.34 0 0 1-48.55 0c-17.57-17.6-11.07-46.91 11.25-56v-123c-20.8-8.51-24.6-30.74-18.64-45L142.57 101 8.45 235.14a28.86 28.86 0 0 0 0 40.81l195.61 195.6a28.86 28.86 0 0 0 40.8 0l194.69-194.69a28.86 28.86 0 0 0 0-40.81z"/></svg> </div> <div class=md-source__repository> okd-io </div> </a> </div> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../../../../.. class=md-nav__link> <span class=md-ellipsis> Home </span> </a> </li> <li class=md-nav__item> <a href=../../../../../about/ class=md-nav__link> <span class=md-ellipsis> About </span> </a> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle " type=checkbox id=__nav_3> <label class=md-nav__link for=__nav_3 id=__nav_3_label tabindex=0> <span class=md-ellipsis> Getting Started </span> <span class="md-nav__icon md-icon"></span> </label> <nav class=md-nav data-md-level=1 aria-labelledby=__nav_3_label aria-expanded=false> <label class=md-nav__title for=__nav_3> <span class="md-nav__icon md-icon"></span> Getting Started </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../../../../../installation/ class=md-nav__link> <span class=md-ellipsis> Installation </span> </a> </li> <li class=md-nav__item> <a href=../../../../../crc/ class=md-nav__link> <span class=md-ellipsis> CRC </span> </a> </li> </ul> </nav> </li> <li class=md-nav__item> <a href=../../../../../docs/ class=md-nav__link> <span class=md-ellipsis> Documentation </span> </a> </li> <li class="md-nav__item md-nav__item--active md-nav__item--nested"> <input class="md-nav__toggle md-toggle " type=checkbox id=__nav_5 checked> <label class=md-nav__link for=__nav_5 id=__nav_5_label tabindex=0> <span class=md-ellipsis> Blog </span> <span class="md-nav__icon md-icon"></span> </label> <nav class=md-nav data-md-level=1 aria-labelledby=__nav_5_label aria-expanded=true> <label class=md-nav__title for=__nav_5> <span class="md-nav__icon md-icon"></span> Blog </label> <ul class=md-nav__list data-md-scrollfix> <li class="md-nav__item md-nav__item--active"> <a href=../../../../ class=md-nav__link> <span class=md-ellipsis> Posts </span> </a> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle " type=checkbox id=__nav_5_2> <label class=md-nav__link for=__nav_5_2 id=__nav_5_2_label tabindex=0> <span class=md-ellipsis> Archive </span> <span class="md-nav__icon md-icon"></span> </label> <nav class=md-nav data-md-level=2 aria-labelledby=__nav_5_2_label aria-expanded=false> <label class=md-nav__title for=__nav_5_2> <span class="md-nav__icon md-icon"></span> Archive </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../../../../archive/2024/ class=md-nav__link> <span class=md-ellipsis> 2024 </span> </a> </li> <li class=md-nav__item> <a href=../../../../archive/2023/ class=md-nav__link> <span class=md-ellipsis> 2023 </span> </a> </li> <li class=md-nav__item> <a href=../../../../archive/2022/ class=md-nav__link> <span class=md-ellipsis> 2022 </span> </a> </li> <li class=md-nav__item> <a href=../../../../archive/2021/ class=md-nav__link> <span class=md-ellipsis> 2021 </span> </a> </li> <li class=md-nav__item> <a href=../../../../archive/2020/ class=md-nav__link> <span class=md-ellipsis> 2020 </span> </a> </li> </ul> </nav> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle " type=checkbox id=__nav_6> <label class=md-nav__link for=__nav_6 id=__nav_6_label tabindex=0> <span class=md-ellipsis> Community </span> <span class="md-nav__icon md-icon"></span> </label> <nav class=md-nav data-md-level=1 aria-labelledby=__nav_6_label aria-expanded=false> <label class=md-nav__title for=__nav_6> <span class="md-nav__icon md-icon"></span> Community </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../../../../../community/ class=md-nav__link> <span class=md-ellipsis> OKD Community </span> </a> </li> <li class=md-nav__item> <a href=../../../../../conduct/ class=md-nav__link> <span class=md-ellipsis> Code of Conduct </span> </a> </li> <li class=md-nav__item> <a href=../../../../../contributor/ class=md-nav__link> <span class=md-ellipsis> Contributor </span> </a> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle " type=checkbox id=__nav_7> <label class=md-nav__link for=__nav_7 id=__nav_7_label tabindex=0> <span class=md-ellipsis> OKD Working Group </span> <span class="md-nav__icon md-icon"></span> </label> <nav class=md-nav data-md-level=1 aria-labelledby=__nav_7_label aria-expanded=false> <label class=md-nav__title for=__nav_7> <span class="md-nav__icon md-icon"></span> OKD Working Group </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../../../../../working-groups/ class=md-nav__link> <span class=md-ellipsis> About </span> </a> </li> <li class=md-nav__item> <a href=../../../../../charter/ class=md-nav__link> <span class=md-ellipsis> Charter </span> </a> </li> <li class=md-nav__item> <a href=../../../../../communications/ class=md-nav__link> <span class=md-ellipsis> Communications </span> </a> </li> <li class=md-nav__item> <a href=../../../../../working-group/minutes/minutes/ class=md-nav__link> <span class=md-ellipsis> Minutes </span> </a> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle " type=checkbox id=__nav_7_5> <label class=md-nav__link for=__nav_7_5 id=__nav_7_5_label tabindex=0> <span class=md-ellipsis> Subgroups </span> <span class="md-nav__icon md-icon"></span> </label> <nav class=md-nav data-md-level=2 aria-labelledby=__nav_7_5_label aria-expanded=false> <label class=md-nav__title for=__nav_7_5> <span class="md-nav__icon md-icon"></span> Subgroups </label> <ul class=md-nav__list data-md-scrollfix> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle " type=checkbox id=__nav_7_5_1> <label class=md-nav__link for=__nav_7_5_1 id=__nav_7_5_1_label tabindex=0> <span class=md-ellipsis> Documentation </span> <span class="md-nav__icon md-icon"></span> </label> <nav class=md-nav data-md-level=3 aria-labelledby=__nav_7_5_1_label aria-expanded=false> <label class=md-nav__title for=__nav_7_5_1> <span class="md-nav__icon md-icon"></span> Documentation </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../../../../../wg_docs/overview/ class=md-nav__link> <span class=md-ellipsis> Overview </span> </a> </li> <li class=md-nav__item> <a href=../../../../../wg_docs/okd-io/ class=md-nav__link> <span class=md-ellipsis> Modifying OKD.io </span> </a> </li> <li class=md-nav__item> <a href=../../../../../wg_docs/doc-env/ class=md-nav__link> <span class=md-ellipsis> Setup environment </span> </a> </li> <li class=md-nav__item> <a href=../../../../../wg_docs/content/ class=md-nav__link> <span class=md-ellipsis> Content guidelines </span> </a> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle " type=checkbox id=__nav_7_5_2> <label class=md-nav__link for=__nav_7_5_2 id=__nav_7_5_2_label tabindex=0> <span class=md-ellipsis> CRC Build </span> <span class="md-nav__icon md-icon"></span> </label> <nav class=md-nav data-md-level=3 aria-labelledby=__nav_7_5_2_label aria-expanded=false> <label class=md-nav__title for=__nav_7_5_2> <span class="md-nav__icon md-icon"></span> CRC Build </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../../../../../wg_crc/overview/ class=md-nav__link> <span class=md-ellipsis> Overview </span> </a> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle " type=checkbox id=__nav_7_5_3> <label class=md-nav__link for=__nav_7_5_3 id=__nav_7_5_3_label tabindex=0> <span class=md-ellipsis> OKD Virtualization </span> <span class="md-nav__icon md-icon"></span> </label> <nav class=md-nav data-md-level=3 aria-labelledby=__nav_7_5_3_label aria-expanded=false> <label class=md-nav__title for=__nav_7_5_3> <span class="md-nav__icon md-icon"></span> OKD Virtualization </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../../../../../wg_virt/overview/ class=md-nav__link> <span class=md-ellipsis> Overview </span> </a> </li> <li class=md-nav__item> <a href=../../../../../wg_virt/community/ class=md-nav__link> <span class=md-ellipsis> Community </span> </a> </li> </ul> </nav> </li> </ul> </nav> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle " type=checkbox id=__nav_8> <label class=md-nav__link for=__nav_8 id=__nav_8_label tabindex=0> <span class=md-ellipsis> OKD Development </span> <span class="md-nav__icon md-icon"></span> </label> <nav class=md-nav data-md-level=1 aria-labelledby=__nav_8_label aria-expanded=false> <label class=md-nav__title for=__nav_8> <span class="md-nav__icon md-icon"></span> OKD Development </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../../../../../okd_tech_docs/ class=md-nav__link> <span class=md-ellipsis> Overview </span> </a> </li> <li class=md-nav__item> <a href=../../../../../okd_tech_docs/modifying_okd/ class=md-nav__link> <span class=md-ellipsis> Modifying OKD </span> </a> </li> <li class=md-nav__item> <a href=../../../../../okd_tech_docs/operators/ class=md-nav__link> <span class=md-ellipsis> Operator Hub catalogs </span> </a> </li> <li class=md-nav__item> <a href=../../../../../okd_tech_docs/release/ class=md-nav__link> <span class=md-ellipsis> Release </span> </a> </li> <li class=md-nav__item> <a href=../../../../../okd_tech_docs/troubleshoot/ class=md-nav__link> <span class=md-ellipsis> Troubleshooting </span> </a> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle " type=checkbox id=__nav_9> <label class=md-nav__link for=__nav_9 id=__nav_9_label tabindex=0> <span class=md-ellipsis> Help </span> <span class="md-nav__icon md-icon"></span> </label> <nav class=md-nav data-md-level=1 aria-labelledby=__nav_9_label aria-expanded=false> <label class=md-nav__title for=__nav_9> <span class="md-nav__icon md-icon"></span> Help </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../../../../../help/ class=md-nav__link> <span class=md-ellipsis> Getting Help </span> </a> </li> <li class=md-nav__item> <a href=../../../../../faq/ class=md-nav__link> <span class=md-ellipsis> FAQ </span> </a> </li> <li class=md-nav__item> <a href=../../../../../scos-migration-faq/ class=md-nav__link> <span class=md-ellipsis> SCOS Migration FAQ </span> </a> </li> </ul> </nav> </li> </ul> </nav> </div> </div> </div> <div class="md-sidebar md-sidebar--secondary" data-md-component=sidebar data-md-type=toc> <div class=md-sidebar__scrollwrap> <div class=md-sidebar__inner> <nav class="md-nav md-nav--secondary" aria-label="Table of contents"> <label class=md-nav__title for=__toc> <span class="md-nav__icon md-icon"></span> Table of contents </label> <ul class=md-nav__list data-md-component=toc data-md-scrollfix> <li class=md-nav__item> <a href=#reference-material class=md-nav__link> <span class=md-ellipsis> Reference Material </span> </a> </li> <li class=md-nav__item> <a href=#preparation class=md-nav__link> <span class=md-ellipsis> Preparation </span> </a> <nav class=md-nav aria-label=Preparation> <ul class=md-nav__list> <li class=md-nav__item> <a href=#compute-resources class=md-nav__link> <span class=md-ellipsis> Compute resources </span> </a> </li> <li class=md-nav__item> <a href=#network class=md-nav__link> <span class=md-ellipsis> Network </span> </a> <nav class=md-nav aria-label=Network> <ul class=md-nav__list> <li class=md-nav__item> <a href=#dns class=md-nav__link> <span class=md-ellipsis> DNS </span> </a> </li> <li class=md-nav__item> <a href=#dhcp class=md-nav__link> <span class=md-ellipsis> DHCP </span> </a> </li> </ul> </nav> </li> </ul> </nav> </li> <li class=md-nav__item> <a href=#running-the-assisted-installer class=md-nav__link> <span class=md-ellipsis> Running the Assisted Installer </span> </a> <nav class=md-nav aria-label="Running the Assisted Installer"> <ul class=md-nav__list> <li class=md-nav__item> <a href=#installing-podman class=md-nav__link> <span class=md-ellipsis> Installing Podman </span> </a> </li> <li class=md-nav__item> <a href=#create-the-configuration-file class=md-nav__link> <span class=md-ellipsis> Create the configuration file </span> </a> </li> <li class=md-nav__item> <a href=#run-the-assisted-installer class=md-nav__link> <span class=md-ellipsis> Run the Assisted Installer </span> </a> </li> </ul> </nav> </li> <li class=md-nav__item> <a href=#create-a-cluster class=md-nav__link> <span class=md-ellipsis> Create a cluster </span> </a> </li> <li class=md-nav__item> <a href=#issues-to-be-resolved class=md-nav__link> <span class=md-ellipsis> Issues to be resolved </span> </a> <nav class=md-nav aria-label="Issues to be resolved"> <ul class=md-nav__list> <li class=md-nav__item> <a href=#scos-issue class=md-nav__link> <span class=md-ellipsis> SCOS issue </span> </a> </li> <li class=md-nav__item> <a href=#fcos-issue class=md-nav__link> <span class=md-ellipsis> FCOS issue </span> </a> </li> </ul> </nav> </li> </ul> </nav> </div> </div> </div> <div class="md-content md-content--post" data-md-component=content> <div class="md-sidebar md-sidebar--post" data-md-component=sidebar data-md-type=navigation> <div class=md-sidebar__scrollwrap> <div class="md-sidebar__inner md-post"> <nav class="md-nav md-nav--primary"> <div class=md-post__back> <div class="md-nav__title md-nav__container"> <a href=../../../../ class=md-nav__link> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11h12Z"/></svg> <span class=md-ellipsis> Back to index </span> </a> </div> </div> <ul class="md-post__meta md-nav__list"> <li class="md-nav__item md-nav__item--section"> <div class=md-post__title> <span class=md-ellipsis> Metadata </span> </div> <nav class=md-nav> <ul class=md-nav__list> <li class=md-nav__item> <div class=md-nav__link> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M19 19H5V8h14m-3-7v2H8V1H6v2H5c-1.11 0-2 .89-2 2v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2V5a2 2 0 0 0-2-2h-1V1m-1 11h-5v5h5v-5Z"/></svg> <time datetime="2023-04-13 00:00:00" class=md-ellipsis>April 13, 2023</time> </div> </li> <li class=md-nav__item> <div class=md-nav__link> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M12 20a8 8 0 0 0 8-8 8 8 0 0 0-8-8 8 8 0 0 0-8 8 8 8 0 0 0 8 8m0-18a10 10 0 0 1 10 10 10 10 0 0 1-10 10C6.47 22 2 17.5 2 12A10 10 0 0 1 12 2m.5 5v5.25l4.5 2.67-.75 1.23L11 13V7h1.5Z"/></svg> <span class=md-ellipsis> 18 min read </span> </div> </li> </ul> </nav> </li> </ul> </nav> </div> </div> </div> <article class="md-content__inner md-typeset"> <h1 id=create-a-single-node-okd-sno-cluster-with-assisted-installer>Create a Single Node OKD (SNO) Cluster with Assisted Installer<a class=headerlink href=#create-a-single-node-okd-sno-cluster-with-assisted-installer title="Permanent link">&para;</a></h1> <!--- cSpell:ignore Vadim configmap SCOS auths aWQ6cGFzcwo kubeconfig kubeadmin nsenter rootfs ostree kublet kubelet baremetal autoscaler apiserver Alertmanager Thanos packageserver thanos-querier --> <p>This guide outlines how to run the assisted installer locally then use it to deploy a single node OKD cluster.</p> <!-- more --> <div class="admonition warning"> <p class=admonition-title>Warning</p> <p>This guide won't produce a working system as there are issues to be resolved</p> </div> <h2 id=reference-material>Reference Material<a class=headerlink href=#reference-material title="Permanent link">&para;</a></h2> <p>Information from the following sources was used to create this guide:</p> <ul> <li><a href=https://docs.openshift.com/container-platform/latest/installing/installing_sno/install-sno-preparing-to-install-sno.html target=_blank>OpenShift Container Platform Single Node Docs</a></li> <li><a href=https://hackmd.io/tDnHM2BoQru0VgqMGI_Q5g target=_blank>Assisted Installer guide from Vadim</a></li> <li><a href=https://github.com/openshift/assisted-service/tree/master/deploy/podman target=_blank>Assisted Installer github repo instructions</a></li> </ul> <h2 id=preparation>Preparation<a class=headerlink href=#preparation title="Permanent link">&para;</a></h2> <h3 id=compute-resources>Compute resources<a class=headerlink href=#compute-resources title="Permanent link">&para;</a></h3> <p>A single Node OKD cluster takes fewer resource than the full cluster deployment, but you still need sufficient CPU and memory resources to run. You can run on a bare metal system or in a virtual environment. The minimum resources required are:</p> <ul> <li>vCPU : 8 cores</li> <li>Memory : 16 GB</li> <li>Storage (ideally fast storage, such as SSD) : 120GB</li> </ul> <p>These are the absolute minimum resources needed, depending on the workload(s) you want to run in the cluster you may need additional CPU, memory and storage.</p> <h3 id=network>Network<a class=headerlink href=#network title="Permanent link">&para;</a></h3> <p>Before starting with the assisted installer you need to setup your local network by allocating an IP address for the cluster and ensure DNS resolution is configured and working. You may also want to configure DHCP to allocate the IP address to a specific MAC address.</p> <div class="admonition info"> <p class=admonition-title>Info</p> <p>This guide assumes you have a basic working knowledge of networking, including DNS name resolution and DHCP.</p> </div> <div class="admonition todo"> <p class=admonition-title>Todo</p> <p>Do we need a network primer for home users wanting to setup OKD that don't have networking experience? If there is a good one available online we can link to it or create our own on this site.</p> </div> <p>You should have the following information before you start. I provide example values, but you need to substitute these for the values for your local environment</p> <table> <thead> <tr> <th>Item</th> <th>Description</th> <th>Sample value</th> </tr> </thead> <tbody> <tr> <td>Machine Network</td> <td>The local network</td> <td>192.168.0.0/24</td> </tr> <tr> <td>Default gateway</td> <td>The default gateway for your network</td> <td>192.168.0.1</td> </tr> <tr> <td>DNS Server(s)</td> <td>Comma separated list of DNS servers (must be able to resolve cluster IP address)</td> <td>192.168.0.2,192.168.0.3</td> </tr> <tr> <td>Cluster IP address</td> <td>The IP address allocated to the OKD cluster</td> <td>192.168.0.59</td> </tr> <tr> <td>Base domain</td> <td>The domain in use on your local network</td> <td>lab.home</td> </tr> <tr> <td>Cluster name</td> <td>The name of the cluster. This will form part of the URLs to access cluster</td> <td>okd-sno</td> </tr> </tbody> </table> <h4 id=dns>DNS<a class=headerlink href=#dns title="Permanent link">&para;</a></h4> <p>You must have a DNS server that can resolve the following Fully Qualified Domain Names (FQDN) to the Cluster IP address (192.168.0.59):</p> <ul> <li><code>api.&lt;Cluster Name&gt;.&lt;base domain&gt;</code> - the Kubernetes API. (<strong>api.okd-sno.lab.home</strong>)</li> <li><code>api-int.&lt;Cluster Name&gt;.&lt;base domain&gt;</code> - the Internal API. (<strong>api-int.okd-sno.lab.home</strong>)</li> <li><code>*.apps.&lt;Cluster Name&gt;.&lt;base domain&gt;</code> - Ingress route. (<strong>*.apps.okd-sno.lab.home</strong>)</li> </ul> <p>The last item is a wild card resolution which should resolve all entries ending in <code>apps.&lt;Cluster Name&gt;.&lt;base domain&gt;</code>, so <strong>console-openshift-console.apps.okd-sno.lab.home</strong> should resolve to the Cluster IP address, <strong>192.168.0.59</strong>.</p> <p>Reverse lookup should also be working, so <strong>192.168.0.59</strong> should resolve to the host <strong>api.okd-sno.lab.home</strong>.</p> <h4 id=dhcp>DHCP<a class=headerlink href=#dhcp title="Permanent link">&para;</a></h4> <p>When your single node cluster runs it is important that it uses the assigned IP address. You can configure this in the Assisted Installer to setup a static IP address in the cluster configuration or get your DHCP server to assign the IP address to a specific MAC address. </p> <p>You can choose the preferred solution in your network.</p> <h2 id=running-the-assisted-installer>Running the Assisted Installer<a class=headerlink href=#running-the-assisted-installer title="Permanent link">&para;</a></h2> <p>For OpenShift Container Platform RedHat hosts the assisted installer, so you can simply use their hosted version, but for OKD you need to run the installer yourself. This guide will use podman to run the Assisted Installer locally.</p> <p>The guide uses the most basic setup of the Assisted Installer, but the documentation in the git repository provides additional information to enable secure communication (https) and enable persistent storage.</p> <h3 id=installing-podman>Installing Podman<a class=headerlink href=#installing-podman title="Permanent link">&para;</a></h3> <p>You need to have podman available on your machine (where the assisted installer will run). This is typically your laptop or workstation - not the target system where the OKD single node cluster will run. Follow the <a href=https://podman.io/getting-started/installation target=_blank>instructions on podman.io</a> to install podman if you don't already have it installed. You should also ensure you have an up to date version of podman installed.</p> <div class="admonition warning"> <p class=admonition-title>Warning</p> <p>If you ae using podman machine (MacOS and Windows native users) you can't use the <code>podman play kube --configmap</code> option as mentioned in the Assisted Installer git repository, as the <strong>--configmap</strong> option is not available. You need to concatenate your config and deployments yaml files into a single yaml file using the <code>---</code> document separator. Linux users and Windows users running under the Windows Subsystem for Linux have access to the --configmap option.</p> </div> <h3 id=create-the-configuration-file>Create the configuration file<a class=headerlink href=#create-the-configuration-file title="Permanent link">&para;</a></h3> <p>Before creating the configuration file you need to know the IP of the host running podman that will host the Assisted Installer. </p> <p>As the OKD cluster boots it will need to communicate with the Assisted Installer, so needs to know the IP address of the assisted installer. It is important that the OKD cluster host machine is able to communicate with the machine hosting the Assisted Installer and the machine hosting the Assisted Installer is able to run the service and listen for incoming network traffic. (no network firewalls or filters that block this traffic).</p> <p>For this example I will use IP <strong>192.168.0.141</strong> for the system running podman and hosting the Assisted Installer.</p> <p>You need to create the configuration file to run the Assisted Installer in podman. The base files are available in the assisted installer <a href=https://github.com/openshift/assisted-service/tree/master/deploy/podman target=_blank>git repo</a>, but I have modified them and updated them to offer both FCOS (Fedora Core OS) and SCOS (CentOS Stream Core OS) options.</p> <p>Create the file (sno.yaml) - this is the combined file for use with podman machine (will also work with Linux). You need to change all instances of 192.168.0.141 to the IP address of your system running podman and hosting the Assisted Installer:</p> <div class=highlight><span class=filename>sno.yaml</span><pre><span></span><code><span class=nt>apiVersion</span><span class=p>:</span><span class=w> </span><span class="l l-Scalar l-Scalar-Plain">v1</span>
<span class=nt>kind</span><span class=p>:</span><span class=w> </span><span class="l l-Scalar l-Scalar-Plain">ConfigMap</span>
<span class=nt>metadata</span><span class=p>:</span>
<span class=w>  </span><span class=nt>name</span><span class=p>:</span><span class=w> </span><span class="l l-Scalar l-Scalar-Plain">config</span>
<span class=nt>data</span><span class=p>:</span>
<span class=w>  </span><span class=nt>ASSISTED_SERVICE_HOST</span><span class=p>:</span><span class=w> </span><span class="l l-Scalar l-Scalar-Plain">192.168.0.141:8090</span>
<span class=w>  </span><span class=nt>ASSISTED_SERVICE_SCHEME</span><span class=p>:</span><span class=w> </span><span class="l l-Scalar l-Scalar-Plain">http</span>
<span class=w>  </span><span class=nt>AUTH_TYPE</span><span class=p>:</span><span class=w> </span><span class="l l-Scalar l-Scalar-Plain">none</span>
<span class=w>  </span><span class=nt>DB_HOST</span><span class=p>:</span><span class=w> </span><span class="l l-Scalar l-Scalar-Plain">127.0.0.1</span>
<span class=w>  </span><span class=nt>DB_NAME</span><span class=p>:</span><span class=w> </span><span class="l l-Scalar l-Scalar-Plain">installer</span>
<span class=w>  </span><span class=nt>DB_PASS</span><span class=p>:</span><span class=w> </span><span class="l l-Scalar l-Scalar-Plain">admin</span>
<span class=w>  </span><span class=nt>DB_PORT</span><span class=p>:</span><span class=w> </span><span class=s>&quot;5432&quot;</span>
<span class=w>  </span><span class=nt>DB_USER</span><span class=p>:</span><span class=w> </span><span class="l l-Scalar l-Scalar-Plain">admin</span>
<span class=w>  </span><span class=nt>DEPLOY_TARGET</span><span class=p>:</span><span class=w> </span><span class="l l-Scalar l-Scalar-Plain">onprem</span>
<span class=w>  </span><span class=nt>DISK_ENCRYPTION_SUPPORT</span><span class=p>:</span><span class=w> </span><span class=s>&quot;true&quot;</span>
<span class=w>  </span><span class=nt>DUMMY_IGNITION</span><span class=p>:</span><span class=w> </span><span class=s>&quot;false&quot;</span>
<span class=w>  </span><span class=nt>ENABLE_SINGLE_NODE_DNSMASQ</span><span class=p>:</span><span class=w> </span><span class=s>&quot;true&quot;</span>
<span class=w>  </span><span class=nt>HW_VALIDATOR_REQUIREMENTS</span><span class=p>:</span><span class=w> </span><span class=s>&#39;[{&quot;version&quot;:&quot;default&quot;,&quot;master&quot;:{&quot;cpu_cores&quot;:4,&quot;ram_mib&quot;:16384,&quot;disk_size_gb&quot;:100,&quot;installation_disk_speed_threshold_ms&quot;:10,&quot;network_latency_threshold_ms&quot;:100,&quot;packet_loss_percentage&quot;:0},&quot;worker&quot;:{&quot;cpu_cores&quot;:2,&quot;ram_mib&quot;:8192,&quot;disk_size_gb&quot;:100,&quot;installation_disk_speed_threshold_ms&quot;:10,&quot;network_latency_threshold_ms&quot;:1000,&quot;packet_loss_percentage&quot;:10},&quot;sno&quot;:{&quot;cpu_cores&quot;:8,&quot;ram_mib&quot;:16384,&quot;disk_size_gb&quot;:100,&quot;installation_disk_speed_threshold_ms&quot;:10},&quot;edge-worker&quot;:{&quot;cpu_cores&quot;:2,&quot;ram_mib&quot;:8192,&quot;disk_size_gb&quot;:15,&quot;installation_disk_speed_threshold_ms&quot;:10}}]&#39;</span>
<span class=w>  </span><span class=nt>IMAGE_SERVICE_BASE_URL</span><span class=p>:</span><span class=w> </span><span class="l l-Scalar l-Scalar-Plain">http://192.168.0.141:8888</span>
<span class=w>  </span><span class=nt>IPV6_SUPPORT</span><span class=p>:</span><span class=w> </span><span class=s>&quot;true&quot;</span>
<span class=w>  </span><span class=nt>ISO_IMAGE_TYPE</span><span class=p>:</span><span class=w> </span><span class=s>&quot;full-iso&quot;</span>
<span class=w>  </span><span class=nt>LISTEN_PORT</span><span class=p>:</span><span class=w> </span><span class=s>&quot;8888&quot;</span>
<span class=w>  </span><span class=nt>NTP_DEFAULT_SERVER</span><span class=p>:</span><span class=w> </span><span class=s>&quot;&quot;</span>
<span class=w>  </span><span class=nt>POSTGRESQL_DATABASE</span><span class=p>:</span><span class=w> </span><span class="l l-Scalar l-Scalar-Plain">installer</span>
<span class=w>  </span><span class=nt>POSTGRESQL_PASSWORD</span><span class=p>:</span><span class=w> </span><span class="l l-Scalar l-Scalar-Plain">admin</span>
<span class=w>  </span><span class=nt>POSTGRESQL_USER</span><span class=p>:</span><span class=w> </span><span class="l l-Scalar l-Scalar-Plain">admin</span>
<span class=w>  </span><span class=nt>PUBLIC_CONTAINER_REGISTRIES</span><span class=p>:</span><span class=w> </span><span class=s>&#39;quay.io&#39;</span>
<span class=w>  </span><span class=nt>SERVICE_BASE_URL</span><span class=p>:</span><span class=w> </span><span class="l l-Scalar l-Scalar-Plain">http://192.168.0.141:8090</span>
<span class=w>  </span><span class=nt>STORAGE</span><span class=p>:</span><span class=w> </span><span class="l l-Scalar l-Scalar-Plain">filesystem</span>
<span class=w>  </span><span class=nt>OS_IMAGES</span><span class=p>:</span><span class=w> </span><span class=s>&#39;[{&quot;openshift_version&quot;:&quot;4.12&quot;,&quot;cpu_architecture&quot;:&quot;x86_64&quot;,&quot;url&quot;:&quot;https://builds.coreos.fedoraproject.org/prod/streams/stable/builds/37.20221127.3.0/x86_64/fedora-coreos-37.20221127.3.0-live.x86_64.iso&quot;,&quot;version&quot;:&quot;37.20221127.3.0&quot;},{&quot;openshift_version&quot;:&quot;4.12-scos&quot;,&quot;cpu_architecture&quot;:&quot;x86_64&quot;,&quot;url&quot;:&quot;https://builds.coreos.fedoraproject.org/prod/streams/stable/builds/37.20221127.3.0/x86_64/fedora-coreos-37.20221127.3.0-live.x86_64.iso&quot;,&quot;version&quot;:&quot;37.20221127.3.0&quot;}]&#39;</span>
<span class=w>  </span><span class=nt>RELEASE_IMAGES</span><span class=p>:</span><span class=w> </span><span class=s>&#39;[{&quot;openshift_version&quot;:&quot;4.12&quot;,&quot;cpu_architecture&quot;:&quot;x86_64&quot;,&quot;cpu_architectures&quot;:[&quot;x86_64&quot;],&quot;url&quot;:&quot;quay.io/openshift/okd:4.12.0-0.okd-2023-04-01-051724&quot;,&quot;version&quot;:&quot;4.12.0-0.okd-2023-04-01-051724&quot;,&quot;default&quot;:true},{&quot;openshift_version&quot;:&quot;4.12-scos&quot;,&quot;cpu_architecture&quot;:&quot;x86_64&quot;,&quot;cpu_architectures&quot;:[&quot;x86_64&quot;],&quot;url&quot;:&quot;quay.io/okd/scos-release:4.12.0-0.okd-scos-2023-03-23-213604&quot;,&quot;version&quot;:&quot;4.12.0-0.okd-scos-2023-03-23-213604&quot;,&quot;default&quot;:false}]&#39;</span>
<span class=w>  </span><span class=nt>ENABLE_UPGRADE_AGENT</span><span class=p>:</span><span class=w> </span><span class=s>&quot;false&quot;</span>
<span class=nn>---</span>
<span class=nt>apiVersion</span><span class=p>:</span><span class=w> </span><span class="l l-Scalar l-Scalar-Plain">v1</span>
<span class=nt>kind</span><span class=p>:</span><span class=w> </span><span class="l l-Scalar l-Scalar-Plain">Pod</span>
<span class=nt>metadata</span><span class=p>:</span>
<span class=w>  </span><span class=nt>labels</span><span class=p>:</span>
<span class=w>    </span><span class=nt>app</span><span class=p>:</span><span class=w> </span><span class="l l-Scalar l-Scalar-Plain">assisted-installer</span>
<span class=w>  </span><span class=nt>name</span><span class=p>:</span><span class=w> </span><span class="l l-Scalar l-Scalar-Plain">assisted-installer</span>
<span class=nt>spec</span><span class=p>:</span>
<span class=w>  </span><span class=nt>containers</span><span class=p>:</span>
<span class=w>  </span><span class="p p-Indicator">-</span><span class=w> </span><span class=nt>args</span><span class=p>:</span>
<span class=w>    </span><span class="p p-Indicator">-</span><span class=w> </span><span class="l l-Scalar l-Scalar-Plain">run-postgresql</span>
<span class=w>    </span><span class=nt>image</span><span class=p>:</span><span class=w> </span><span class="l l-Scalar l-Scalar-Plain">quay.io/centos7/postgresql-12-centos7:latest</span>
<span class=w>    </span><span class=nt>name</span><span class=p>:</span><span class=w> </span><span class="l l-Scalar l-Scalar-Plain">db</span>
<span class=w>    </span><span class=nt>envFrom</span><span class=p>:</span>
<span class=w>    </span><span class="p p-Indicator">-</span><span class=w> </span><span class=nt>configMapRef</span><span class=p>:</span>
<span class=w>        </span><span class=nt>name</span><span class=p>:</span><span class=w> </span><span class="l l-Scalar l-Scalar-Plain">config</span>
<span class=w>  </span><span class="p p-Indicator">-</span><span class=w> </span><span class=nt>image</span><span class=p>:</span><span class=w> </span><span class="l l-Scalar l-Scalar-Plain">quay.io/edge-infrastructure/assisted-installer-ui:latest</span>
<span class=w>    </span><span class=nt>name</span><span class=p>:</span><span class=w> </span><span class="l l-Scalar l-Scalar-Plain">ui</span>
<span class=w>    </span><span class=nt>ports</span><span class=p>:</span>
<span class=w>    </span><span class="p p-Indicator">-</span><span class=w> </span><span class=nt>hostPort</span><span class=p>:</span><span class=w> </span><span class="l l-Scalar l-Scalar-Plain">8080</span>
<span class=w>    </span><span class=nt>envFrom</span><span class=p>:</span>
<span class=w>    </span><span class="p p-Indicator">-</span><span class=w> </span><span class=nt>configMapRef</span><span class=p>:</span>
<span class=w>        </span><span class=nt>name</span><span class=p>:</span><span class=w> </span><span class="l l-Scalar l-Scalar-Plain">config</span>
<span class=w>  </span><span class="p p-Indicator">-</span><span class=w> </span><span class=nt>image</span><span class=p>:</span><span class=w> </span><span class="l l-Scalar l-Scalar-Plain">quay.io/edge-infrastructure/assisted-image-service:latest</span>
<span class=w>    </span><span class=nt>name</span><span class=p>:</span><span class=w> </span><span class="l l-Scalar l-Scalar-Plain">image-service</span>
<span class=w>    </span><span class=nt>ports</span><span class=p>:</span>
<span class=w>    </span><span class="p p-Indicator">-</span><span class=w> </span><span class=nt>hostPort</span><span class=p>:</span><span class=w> </span><span class="l l-Scalar l-Scalar-Plain">8888</span>
<span class=w>    </span><span class=nt>envFrom</span><span class=p>:</span>
<span class=w>    </span><span class="p p-Indicator">-</span><span class=w> </span><span class=nt>configMapRef</span><span class=p>:</span>
<span class=w>        </span><span class=nt>name</span><span class=p>:</span><span class=w> </span><span class="l l-Scalar l-Scalar-Plain">config</span>
<span class=w>  </span><span class="p p-Indicator">-</span><span class=w> </span><span class=nt>image</span><span class=p>:</span><span class=w> </span><span class="l l-Scalar l-Scalar-Plain">quay.io/edge-infrastructure/assisted-service:latest</span>
<span class=w>    </span><span class=nt>name</span><span class=p>:</span><span class=w> </span><span class="l l-Scalar l-Scalar-Plain">service</span>
<span class=w>    </span><span class=nt>ports</span><span class=p>:</span>
<span class=w>    </span><span class="p p-Indicator">-</span><span class=w> </span><span class=nt>hostPort</span><span class=p>:</span><span class=w> </span><span class="l l-Scalar l-Scalar-Plain">8090</span>
<span class=w>    </span><span class=nt>envFrom</span><span class=p>:</span>
<span class=w>    </span><span class="p p-Indicator">-</span><span class=w> </span><span class=nt>configMapRef</span><span class=p>:</span>
<span class=w>        </span><span class=nt>name</span><span class=p>:</span><span class=w> </span><span class="l l-Scalar l-Scalar-Plain">config</span>
<span class=w>  </span><span class=nt>restartPolicy</span><span class=p>:</span><span class=w> </span><span class="l l-Scalar l-Scalar-Plain">Never</span>
</code></pre></div> <p>You may want to modify this configuration to add https communication and persistent storage using information in the <a href=https://github.com/openshift/assisted-service/tree/master/deploy/podman target=_blank>Assisted Installer git repo</a>.</p> <h3 id=run-the-assisted-installer>Run the Assisted Installer<a class=headerlink href=#run-the-assisted-installer title="Permanent link">&para;</a></h3> <p>Once you have your configuration file saved to disk, open a command line, change to the directory containing your sno.yaml file then run the following command:</p> <div class="admonition info"> <p class=admonition-title>Info</p> <p>On a Mac and native Windows system you need to ensure podman machine is running on your system before running the podman play command:</p> <div class=highlight><pre><span></span><code>podman<span class=w> </span>machine<span class=w> </span>init
podman<span class=w> </span>machine<span class=w> </span>start
</code></pre></div> </div> <div class=highlight><pre><span></span><code>podman<span class=w> </span>play<span class=w> </span>kube<span class=w> </span>sno.yaml
</code></pre></div> <p>To stop a running Assisted Installer instance run (without the persistence option configured all cluster data within the Assisted Installer will be lost, so make sure you have all credentials downloaded to your local system):</p> <div class=highlight><pre><span></span><code>podman<span class=w> </span>play<span class=w> </span>kube<span class=w> </span>--down<span class=w> </span>sno.yaml
</code></pre></div> <p>Once the Assisted installer is running you can access it on port 8080 (http) on the system hosting podman, <code>http://192.168.0.141:8080</code> (substitute your IP address) or if accessing from the machine hosting the service <code>http://localhost:8080</code></p> <h2 id=create-a-cluster>Create a cluster<a class=headerlink href=#create-a-cluster title="Permanent link">&para;</a></h2> <p>When you have the Assisted Installer running locally you can use it to deploy a cluster. For a single node cluster follow the steps:</p> <ol> <li>On the Assisted Installer Web UI page click <strong>Create Cluster</strong></li> <li> <p>On the <strong>Cluster details</strong> page enter:</p> <ul> <li>the cluster name (okd-sno)</li> <li>the base domain (lab.home)</li> <li>use the drop down to select the version of OKD you want to install (FCOS or SCOS)</li> <li>x86_64 is the only valid architecture at the time of writing this guide</li> <li>click the <em>Install single node OpenShift (SNO)</em> option</li> <li>enter <code>{"auths":{"fake":{"auth":"aWQ6cGFzcwo="}}}</code> as the pull secret</li> <li>If you configured your DHCP server to serve the correct IP to the targe system MAC address leave the Hosts network configuration set to <strong>DHCP only</strong>. If you want to set the target system IP address as part of the install then select <strong>Static IP, bridges and bonds</strong></li> <li>leave the encryption option off</li> <li>select Next</li> </ul> <p>If you selected static IP address you will get additional options to define the <strong>Network-wide configuration</strong> and <strong>Host specific configurations</strong></p> <ul> <li>on the <strong>Network-wide configuration</strong> page enter the network details</li> <li>on the <strong>Host specific configurations</strong> page enter the interface MAC address on the target host for the cluster and the custer IP address then press Next</li> </ul> </li> <li> <p>On the <strong>Operators</strong> page leave everything as default and press Next</p> </li> <li> <p>On the <strong>Host discovery</strong> page click the Add Host button and complete the dialog the appears</p> <ul> <li>Set the <strong>Provisioning type</strong> to <strong>Minimal image file - Provision with virtual media</strong></li> <li>set the SSH public key !!!Todo Do we need to explain how to create this?</li> <li>leave the rest of the settings as unchecked unless you need to configure a proxy then select the <strong>Generate Discovery ISO</strong> then download the ISO by pressing <strong>Download Discovery ISO</strong>. Once downloaded you can close the popup dialog, where you should see <strong>waiting for hosts...</strong></li> </ul> </li> <li> <p>You should boot your target OKD host using the downloaded ISO file. During the install the target system will reboot a couple of times, so it is important that the first boot uses the ISO but subsequent boots will use the internal hard disk.</p> <div class="admonition warning"> <p class=admonition-title>Warning</p> <p>All internal storage on the target system will be wiped and used for the cluster</p> </div> <ol> <li>Once the target system has booted from the ISO it will contact the Assisted Installer and then appear on the Assisted Installer <strong>Host discovery</strong> screen. After the target system appears and the status moves from <strong>Discovering</strong> to <strong>Ready</strong> On the you can press the next button</li> <li>On the <strong>Storage</strong> page you can configure the storage to use on the target system. The default should work, but you may want to modify if your target system contains multiple disks. Once the storage settings are correct press next</li> <li>On the <strong>Networking</strong> page you should be able to leave things at the default values. You may need to wait a short time while the host is initializing , When the status changes to <strong>Ready</strong> then press next</li> <li>On the <strong>Review and create</strong> page you may need to wait for the preflight checks to complete. When they are ready you can press <strong>Install cluster</strong> to start the cluster install.</li> </ol> </li> </ol> <p>You should be able to leave the system to complete. The target system will reboot twice and then the cluster will be installed and configured. The Assisted installer screen will show the progress.</p> <p>As the cluster is being installed you will be able to download the kubeconfig file for the cluster. It is important to download this before stopping the Assisted Installer as by default the Assisted Installer storage does not persist across a shutdown.</p> <p>Once the cluster setup completes you will see the cluster console access details, including the password for the kubeadmin account. Again, you need to capture this information before stopping the Assisted Installer as the information will be lost if you have not enabled persistence.</p> <h2 id=issues-to-be-resolved>Issues to be resolved<a class=headerlink href=#issues-to-be-resolved title="Permanent link">&para;</a></h2> <p>Currently the generated clusters are not installed correctly, so some work needs to be done to correct the setup instructions or find issues with the Assisted Installer or OKD release files.</p> <h3 id=scos-issue>SCOS issue<a class=headerlink href=#scos-issue title="Permanent link">&para;</a></h3> <p>The SCOS installation fails at step 2/7 with error (this doesn't happen with the FCOS image):</p> <p><em>Host okd-sno: updated status from installing-in-progress to error (Failed - failed executing nsenter [--target 1 --cgroup --mount --ipc --pid -- podman run --net host --pid=host --volume /:/rootfs:rw --volume /usr/bin/rpm-ostree:/usr/bin/rpm-ostree --privileged --entrypoint /usr/bin/machine-config-daemon quay.io/openshift/okd-content@sha256:7986774bbd06f4355567ae05b9b737b437d22dbbc3e0793c343bc7ee2de1ab54 start --node-name localhost --root-mount /rootfs --once-from /opt/install-dir/bootstrap.ign --skip-reboot], Error exit status 255, LastOutput "Error while ensuring access to kublet config.json pull secrets: symlink /var/lib/kubelet/config.json /run/ostree/auth.json: file exists")</em></p> <h3 id=fcos-issue>FCOS issue<a class=headerlink href=#fcos-issue title="Permanent link">&para;</a></h3> <p>The FCOS configuration completes the install but goes from 80% complete with status of Installed and Control Plane Initialization in Finalizing stage to Failed.</p> <p>The cluster operators are not all available</p> <table> <thead> <tr> <th>NAME</th> <th>VERSION</th> <th>AVAILABLE</th> <th>PROGRESSING</th> <th>DEGRADED</th> <th>SINCE</th> <th>MESSAGE</th> </tr> </thead> <tbody> <tr> <td>authentication</td> <td>4.12.0-0.okd-2023-04-01-051724</td> <td>False</td> <td>True</td> <td>True</td> <td>71m</td> <td>OAuthServerDeploymentAvailable: no oauth-openshift.openshift-authentication pods available on any node....</td> </tr> <tr> <td>baremetal</td> <td>4.12.0-0.okd-2023-04-01-051724</td> <td>True</td> <td>False</td> <td>False</td> <td>61m</td> <td></td> </tr> <tr> <td>cloud-controller-manager</td> <td>4.12.0-0.okd-2023-04-01-051724</td> <td>True</td> <td>False</td> <td>False</td> <td>63m</td> <td></td> </tr> <tr> <td>cloud-credential</td> <td>4.12.0-0.okd-2023-04-01-051724</td> <td>True</td> <td>False</td> <td>False</td> <td>70m</td> <td></td> </tr> <tr> <td>cluster-autoscaler</td> <td>4.12.0-0.okd-2023-04-01-051724</td> <td>True</td> <td>False</td> <td>False</td> <td>60m</td> <td></td> </tr> <tr> <td>config-operator</td> <td>4.12.0-0.okd-2023-04-01-051724</td> <td>True</td> <td>False</td> <td>False</td> <td>71m</td> <td></td> </tr> <tr> <td>console</td> <td></td> <td></td> <td></td> <td></td> <td></td> <td></td> </tr> <tr> <td>control-plane-machine-set</td> <td>4.12.0-0.okd-2023-04-01-051724</td> <td>True</td> <td>False</td> <td>False</td> <td>63m</td> <td></td> </tr> <tr> <td>csi-snapshot-controller</td> <td>4.12.0-0.okd-2023-04-01-051724</td> <td>True</td> <td>False</td> <td>False</td> <td>70m</td> <td></td> </tr> <tr> <td>dns</td> <td>4.12.0-0.okd-2023-04-01-051724</td> <td>True</td> <td>False</td> <td>False</td> <td>67m</td> <td></td> </tr> <tr> <td>etcd</td> <td>4.12.0-0.okd-2023-04-01-051724</td> <td>True</td> <td>False</td> <td>False</td> <td>63m</td> <td></td> </tr> <tr> <td>image-registry</td> <td>4.12.0-0.okd-2023-04-01-051724</td> <td>False</td> <td>True</td> <td>False</td> <td>55m</td> <td>Available: The registry is removed...</td> </tr> <tr> <td>ingress</td> <td>4.12.0-0.okd-2023-04-01-051724</td> <td>True</td> <td>True</td> <td>True</td> <td>60m</td> <td>The "default" ingress controller reports Degraded=True: DegradedConditions: One or more other status conditions indicate a degraded state: CanaryChecksSucceeding=False (CanaryChecksRepetitiveFailures: Canary route checks for the default ingress controller are failing)</td> </tr> <tr> <td>insights</td> <td>4.12.0-0.okd-2023-04-01-051724</td> <td>True</td> <td>False</td> <td>False</td> <td>61m</td> <td></td> </tr> <tr> <td>kube-apiserver</td> <td>4.12.0-0.okd-2023-04-01-051724</td> <td>True</td> <td>False</td> <td>False</td> <td>57m</td> <td></td> </tr> <tr> <td>kube-controller-manager</td> <td>4.12.0-0.okd-2023-04-01-051724</td> <td>True</td> <td>False</td> <td>True</td> <td>57m</td> <td>GarbageCollectorDegraded: error fetching rules: Get "https://thanos-querier.openshift-monitoring.svc:9091/api/v1/rules": dial tcp 172.30.59.74:9091: connect: connection refused</td> </tr> <tr> <td>kube-scheduler</td> <td>4.12.0-0.okd-2023-04-01-051724</td> <td>True</td> <td>False</td> <td>False</td> <td>58m</td> <td></td> </tr> <tr> <td>kube-storage-version-migrator</td> <td>4.12.0-0.okd-2023-04-01-051724</td> <td>True</td> <td>False</td> <td>False</td> <td>70m</td> <td></td> </tr> <tr> <td>machine-api</td> <td>4.12.0-0.okd-2023-04-01-051724</td> <td>True</td> <td>False</td> <td>False</td> <td>60m</td> <td></td> </tr> <tr> <td>machine-approver</td> <td>4.12.0-0.okd-2023-04-01-051724</td> <td>True</td> <td>False</td> <td>False</td> <td>63m</td> <td></td> </tr> <tr> <td>machine-config</td> <td>4.12.0-0.okd-2023-04-01-051724</td> <td>True</td> <td>False</td> <td>False</td> <td>69m</td> <td></td> </tr> <tr> <td>marketplace</td> <td>4.12.0-0.okd-2023-04-01-051724</td> <td>True</td> <td>False</td> <td>False</td> <td>70m</td> <td></td> </tr> <tr> <td>monitoring</td> <td></td> <td>False</td> <td>True</td> <td>True</td> <td>44m</td> <td>reconciling PrometheusAdapter Deployment failed: updating Deployment object failed: waiting for DeploymentRollout of openshift-monitoring/prometheus-adapter: current generation 2, observed generation 1, waiting for Alertmanager object changes failed: waiting for Alertmanager openshift-monitoring/main: expected 1 replicas, got 0 updated replicas, reconciling Thanos Querier Deployment failed: updating Deployment object failed: waiting for DeploymentRollout of openshift-monitoring/thanos-querier: current generation 1, observed generation 0</td> </tr> <tr> <td>network</td> <td>4.12.0-0.okd-2023-04-01-051724</td> <td>True</td> <td>False</td> <td>False</td> <td>71m</td> <td></td> </tr> <tr> <td>node-tuning</td> <td>4.12.0-0.okd-2023-04-01-051724</td> <td>True</td> <td>False</td> <td>False</td> <td>59m</td> <td></td> </tr> <tr> <td>openshift-apiserver</td> <td>4.12.0-0.okd-2023-04-01-051724</td> <td>True</td> <td>False</td> <td>False</td> <td>57m</td> <td></td> </tr> <tr> <td>openshift-controller-manager</td> <td></td> <td>False</td> <td>True</td> <td>False</td> <td>71m</td> <td>Available: no pods available on any node.</td> </tr> <tr> <td>openshift-samples</td> <td>4.12.0-0.okd-2023-04-01-051724</td> <td>True</td> <td>False</td> <td>False</td> <td>56m</td> <td></td> </tr> <tr> <td>operator-lifecycle-manager</td> <td>4.12.0-0.okd-2023-04-01-051724</td> <td>True</td> <td>False</td> <td>False</td> <td>61m</td> <td></td> </tr> <tr> <td>operator-lifecycle-manager-catalog</td> <td>4.12.0-0.okd-2023-04-01-051724</td> <td>True</td> <td>False</td> <td>False</td> <td>61m</td> <td></td> </tr> <tr> <td>operator-lifecycle-manager-packageserver</td> <td>4.12.0-0.okd-2023-04-01-051724</td> <td>True</td> <td>False</td> <td>False</td> <td>57m</td> <td></td> </tr> <tr> <td>service-ca</td> <td>4.12.0-0.okd-2023-04-01-051724</td> <td>True</td> <td>False</td> <td>False</td> <td>71m</td> <td></td> </tr> <tr> <td>storage</td> <td>4.12.0-0.okd-2023-04-01-051724</td> <td>True</td> <td>False</td> <td>False</td> <td>60m</td> <td></td> </tr> </tbody> </table> <p>running <code>oc adm must-gather</code> produced the following terminal output:</p> <div class=highlight><pre><span></span><code>[must-gather      ] OUT Using must-gather plug-in image: quay.io/openshift/okd-content@sha256:5b649183c0c550cdfd9f164a70c46f1e23b9e5a7e5af05fc6836bdd5280fbd79
When opening a support case, bugzilla, or issue please include the following summary data along with any other requested information:
ClusterID: 655c76ee-b76c-4072-8fba-c136dcd753f7
ClusterVersion: Installing &quot;4.12.0-0.okd-2023-04-01-051724&quot; for 2 hours: Unable to apply 4.12.0-0.okd-2023-04-01-051724: some cluster operators are not available
ClusterOperators:
    clusteroperator/authentication is not available (OAuthServerDeploymentAvailable: no oauth-openshift.openshift-authentication pods available on any node.
OAuthServerRouteEndpointAccessibleControllerAvailable: Get &quot;https://oauth-openshift.apps.okd-sno.lab.home/healthz&quot;: EOF
OAuthServerServiceEndpointAccessibleControllerAvailable: Get &quot;https://172.30.32.70:443/healthz&quot;: dial tcp 172.30.32.70:443: connect: connection refused
OAuthServerServiceEndpointsEndpointAccessibleControllerAvailable: endpoints &quot;oauth-openshift&quot; not found) because IngressStateEndpointsDegraded: No subsets found for the endpoints of oauth-server
OAuthServerDeploymentDegraded: 1 of 1 requested instances are unavailable for oauth-openshift.openshift-authentication (no pods found with labels &quot;app=oauth-openshift,oauth-openshift-anti-affinity=true&quot;)
OAuthServerRouteEndpointAccessibleControllerDegraded: Get &quot;https://oauth-openshift.apps.okd-sno.lab.home/healthz&quot;: EOF
OAuthServerServiceEndpointAccessibleControllerDegraded: Get &quot;https://172.30.32.70:443/healthz&quot;: dial tcp 172.30.32.70:443: connect: connection refused
OAuthServerServiceEndpointsEndpointAccessibleControllerDegraded: oauth service endpoints are not ready
    clusteroperator/console is not available (&lt;missing&gt;) because &lt;missing&gt;
    clusteroperator/image-registry is not available (Available: The registry is removed
NodeCADaemonAvailable: The daemon set node-ca does not have available replicas
ImagePrunerAvailable: Pruner CronJob has been created) because Degraded: The registry is removed
    clusteroperator/ingress is degraded because The &quot;default&quot; ingress controller reports Degraded=True: DegradedConditions: One or more other status conditions indicate a degraded state: DeploymentReplicasAllAvailable=False (DeploymentReplicasNotAvailable: 0/1 of replicas are available), CanaryChecksSucceeding=False (CanaryChecksRepetitiveFailures: Canary route checks for the default ingress controller are failing)
    clusteroperator/kube-controller-manager is degraded because GarbageCollectorDegraded: error fetching rules: Get &quot;https://thanos-querier.openshift-monitoring.svc:9091/api/v1/rules&quot;: dial tcp 172.30.59.74:9091: connect: connection refused
    clusteroperator/monitoring is not available (reconciling PrometheusAdapter Deployment failed: updating Deployment object failed: waiting for DeploymentRollout of openshift-monitoring/prometheus-adapter: current generation 2, observed generation 1, waiting for Alertmanager object changes failed: waiting for Alertmanager openshift-monitoring/main: expected 1 replicas, got 0 updated replicas, reconciling Thanos Querier Deployment failed: updating Deployment object failed: waiting for DeploymentRollout of openshift-monitoring/thanos-querier: current generation 1, observed generation 0) because reconciling PrometheusAdapter Deployment failed: updating Deployment object failed: waiting for DeploymentRollout of openshift-monitoring/prometheus-adapter: current generation 2, observed generation 1, waiting for Alertmanager object changes failed: waiting for Alertmanager openshift-monitoring/main: expected 1 replicas, got 0 updated replicas, reconciling Thanos Querier Deployment failed: updating Deployment object failed: waiting for DeploymentRollout of openshift-monitoring/thanos-querier: current generation 1, observed generation 0
    clusteroperator/openshift-controller-manager is not available (Available: no pods available on any node.) because All is well


[must-gather      ] OUT namespace/openshift-must-gather-rn52t created
[must-gather      ] OUT clusterrolebinding.rbac.authorization.k8s.io/must-gather-9twf4 created
[must-gather      ] OUT namespace/openshift-must-gather-rn52t deleted
[must-gather      ] OUT clusterrolebinding.rbac.authorization.k8s.io/must-gather-9twf4 deleted


Error running must-gather collection:
    pods &quot;must-gather-&quot; is forbidden: error looking up service account openshift-must-gather-rn52t/default: serviceaccount &quot;default&quot; not found

Falling back to `oc adm inspect clusteroperators.v1.config.openshift.io` to collect basic cluster information.
Gathering data for ns/openshift-config...
Gathering data for ns/openshift-config-managed...
Gathering data for ns/openshift-authentication...
Gathering data for ns/openshift-authentication-operator...
Gathering data for ns/openshift-ingress...
Gathering data for ns/openshift-oauth-apiserver...
Gathering data for ns/openshift-machine-api...
Gathering data for ns/openshift-cloud-controller-manager-operator...
Gathering data for ns/openshift-cloud-controller-manager...
Gathering data for ns/openshift-cloud-credential-operator...
Gathering data for ns/openshift-config-operator...
Gathering data for ns/openshift-cluster-storage-operator...
Gathering data for ns/openshift-dns-operator...
Gathering data for ns/openshift-dns...
Gathering data for ns/openshift-etcd-operator...
Gathering data for ns/openshift-etcd...
Gathering data for ns/openshift-image-registry...
Gathering data for ns/openshift-ingress-operator...
Gathering data for ns/openshift-ingress-canary...
Gathering data for ns/openshift-insights...
Gathering data for ns/openshift-kube-apiserver-operator...
Gathering data for ns/openshift-kube-apiserver...
Gathering data for ns/openshift-kube-controller-manager...
Gathering data for ns/openshift-kube-controller-manager-operator...
Gathering data for ns/kube-system...
Gathering data for ns/openshift-kube-scheduler...
Gathering data for ns/openshift-kube-scheduler-operator...
Gathering data for ns/openshift-kube-storage-version-migrator...
Gathering data for ns/openshift-kube-storage-version-migrator-operator...
Gathering data for ns/openshift-cluster-machine-approver...
Gathering data for ns/openshift-machine-config-operator...
Gathering data for ns/openshift-kni-infra...
Gathering data for ns/openshift-openstack-infra...
Gathering data for ns/openshift-ovirt-infra...
Gathering data for ns/openshift-vsphere-infra...
Gathering data for ns/openshift-nutanix-infra...
Gathering data for ns/openshift-marketplace...
Gathering data for ns/openshift-monitoring...
Gathering data for ns/openshift-user-workload-monitoring...
Gathering data for ns/openshift-multus...
Gathering data for ns/openshift-ovn-kubernetes...
Gathering data for ns/openshift-host-network...
Gathering data for ns/openshift-network-diagnostics...
Gathering data for ns/openshift-network-operator...
Gathering data for ns/openshift-cloud-network-config-controller...
Gathering data for ns/openshift-cluster-node-tuning-operator...
Gathering data for ns/openshift-apiserver-operator...
Gathering data for ns/openshift-apiserver...
Gathering data for ns/openshift-controller-manager-operator...
Gathering data for ns/openshift-controller-manager...
Gathering data for ns/openshift-route-controller-manager...
Gathering data for ns/openshift-cluster-samples-operator...
Gathering data for ns/openshift-operator-lifecycle-manager...
Gathering data for ns/openshift-service-ca-operator...
Gathering data for ns/openshift-service-ca...
Gathering data for ns/openshift-cluster-csi-drivers...
Wrote inspect data to must-gather.local.5575179556041727039/inspect.local.62720609973566482.
error running backup collection: errors occurred while gathering data:
    [skipping gathering clusterroles.rbac.authorization.k8s.io/system:registry due to error: clusterroles.rbac.authorization.k8s.io &quot;system:registry&quot; not found, skipping gathering clusterrolebindings.rbac.authorization.k8s.io/registry-registry-role due to error: clusterrolebindings.rbac.authorization.k8s.io &quot;registry-registry-role&quot; not found, skipping gathering podnetworkconnectivitychecks.controlplane.operator.openshift.io due to error: the server doesn&#39;t have a resource type &quot;podnetworkconnectivitychecks&quot;, skipping gathering endpoints/host-etcd-2 due to error: endpoints &quot;host-etcd-2&quot; not found, skipping gathering sharedconfigmaps.sharedresource.openshift.io due to error: the server doesn&#39;t have a resource type &quot;sharedconfigmaps&quot;, skipping gathering sharedsecrets.sharedresource.openshift.io due to error: the server doesn&#39;t have a resource type &quot;sharedsecrets&quot;]


Reprinting Cluster State:
When opening a support case, bugzilla, or issue please include the following summary data along with any other requested information:
ClusterID: 655c76ee-b76c-4072-8fba-c136dcd753f7
ClusterVersion: Installing &quot;4.12.0-0.okd-2023-04-01-051724&quot; for 2 hours: Unable to apply 4.12.0-0.okd-2023-04-01-051724: some cluster operators are not available
ClusterOperators:
    clusteroperator/authentication is not available (OAuthServerDeploymentAvailable: no oauth-openshift.openshift-authentication pods available on any node.
OAuthServerRouteEndpointAccessibleControllerAvailable: Get &quot;https://oauth-openshift.apps.okd-sno.lab.home/healthz&quot;: EOF
OAuthServerServiceEndpointAccessibleControllerAvailable: Get &quot;https://172.30.32.70:443/healthz&quot;: dial tcp 172.30.32.70:443: connect: connection refused
OAuthServerServiceEndpointsEndpointAccessibleControllerAvailable: endpoints &quot;oauth-openshift&quot; not found) because IngressStateEndpointsDegraded: No subsets found for the endpoints of oauth-server
OAuthServerDeploymentDegraded: 1 of 1 requested instances are unavailable for oauth-openshift.openshift-authentication (no pods found with labels &quot;app=oauth-openshift,oauth-openshift-anti-affinity=true&quot;)
OAuthServerRouteEndpointAccessibleControllerDegraded: Get &quot;https://oauth-openshift.apps.okd-sno.lab.home/healthz&quot;: EOF
OAuthServerServiceEndpointAccessibleControllerDegraded: Get &quot;https://172.30.32.70:443/healthz&quot;: dial tcp 172.30.32.70:443: connect: connection refused
OAuthServerServiceEndpointsEndpointAccessibleControllerDegraded: oauth service endpoints are not ready
    clusteroperator/console is not available (&lt;missing&gt;) because &lt;missing&gt;
    clusteroperator/image-registry is not available (Available: The registry is removed
NodeCADaemonAvailable: The daemon set node-ca does not have available replicas
ImagePrunerAvailable: Pruner CronJob has been created) because Degraded: The registry is removed
    clusteroperator/ingress is degraded because The &quot;default&quot; ingress controller reports Degraded=True: DegradedConditions: One or more other status conditions indicate a degraded state: DeploymentReplicasAllAvailable=False (DeploymentReplicasNotAvailable: 0/1 of replicas are available), CanaryChecksSucceeding=False (CanaryChecksRepetitiveFailures: Canary route checks for the default ingress controller are failing)
    clusteroperator/kube-controller-manager is degraded because GarbageCollectorDegraded: error fetching rules: Get &quot;https://thanos-querier.openshift-monitoring.svc:9091/api/v1/rules&quot;: dial tcp 172.30.59.74:9091: connect: connection refused
    clusteroperator/monitoring is not available (reconciling PrometheusAdapter Deployment failed: updating Deployment object failed: waiting for DeploymentRollout of openshift-monitoring/prometheus-adapter: current generation 2, observed generation 1, waiting for Alertmanager object changes failed: waiting for Alertmanager openshift-monitoring/main: expected 1 replicas, got 0 updated replicas, reconciling Thanos Querier Deployment failed: updating Deployment object failed: waiting for DeploymentRollout of openshift-monitoring/thanos-querier: current generation 1, observed generation 0) because reconciling PrometheusAdapter Deployment failed: updating Deployment object failed: waiting for DeploymentRollout of openshift-monitoring/prometheus-adapter: current generation 2, observed generation 1, waiting for Alertmanager object changes failed: waiting for Alertmanager openshift-monitoring/main: expected 1 replicas, got 0 updated replicas, reconciling Thanos Querier Deployment failed: updating Deployment object failed: waiting for DeploymentRollout of openshift-monitoring/thanos-querier: current generation 1, observed generation 0
    clusteroperator/openshift-controller-manager is not available (Available: no pods available on any node.) because All is well


Error from server (Forbidden): pods &quot;must-gather-&quot; is forbidden: error looking up service account openshift-must-gather-rn52t/default: serviceaccount &quot;default&quot; not found
</code></pre></div> <p>and the generated bundle can be found <a href="https://www.dropbox.com/s/aarjem5th51mml5/okd-sno.tgz?dl=0" target=_blank>here</a></p> </article> </div> <script>var target=document.getElementById(location.hash.slice(1));target&&target.name&&(target.checked=target.name.startsWith("__tabbed_"))</script> </div> </main> <!-- Footer --> <footer class=md-footer> <div class=container> <div class=row> <!-- Social Section --> <div class="col-md-4 col-sm-12"> <a href=https://www.redhat.com/ > <img alt="Red Hat" src=https://assets.openshift.com/hubfs/images/logos/Logo-RedHat-A-Reverse-RGB.svg style="width: 128px"> </a> </div> <div class="col-md-4 col-sm-12"> <ul class=social> <li class=twitter> <a href=https://twitter.com/okd_io> <span> <i class="fa fa-twitter-square"></i> </span> </a> </li> <li class=github> <a href=https://github.com/okd-project/okd> <span> <i class="fa fa-github"></i> </span> </a> </li> <li class=facebook> <a href=https://www.facebook.com/openshift> <span> <i class="fa fa-facebook-square"></i> </span> </a> </li> </ul> </div> </div> </div> </footer> </div> <div class=md-dialog data-md-component=dialog> <div class="md-dialog__inner md-typeset"></div> </div> <script id=__config type=application/json>{"base": "../../../../..", "features": ["content.code.copy", "content.code.annotate", "naviagation.sections", "navigation.tracking", "search.suggest", "search.highlight"], "search": "../../../../../assets/javascripts/workers/search.b8dbb3d2.min.js", "translations": {"clipboard.copied": "Copied to clipboard", "clipboard.copy": "Copy to clipboard", "search.result.more.one": "1 more on this page", "search.result.more.other": "# more on this page", "search.result.none": "No matching documents", "search.result.one": "1 matching document", "search.result.other": "# matching documents", "search.result.placeholder": "Type to start searching", "search.result.term.missing": "Missing", "select.version": "Select version"}}</script> <script src=../../../../../assets/javascripts/bundle.081f42fc.min.js></script> </body> </html>